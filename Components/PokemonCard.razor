@namespace Acromo
@using Acromo.Constants
@* Pokemon Card Component - Displays a single Pokemon with all its details *@

<div class="pokemon-card">
    <div class="pokemon-header pokemon-card-standard-border">
        <div class="pokemon-sprite-container">
            @if (!string.IsNullOrEmpty(Pokemon.SpriteUrl))
            {
                <img src="@Pokemon.SpriteUrl" alt="@Pokemon.Name" class="pokemon-sprite" />
            }
            else
            {
                <div class="sprite-placeholder">?</div>
            }
        </div>
        <div class="pokemon-title">
            <h3>
                @(!string.IsNullOrEmpty(Pokemon.Nickname) ? Pokemon.Nickname : Pokemon.Name) 
                @if (!string.IsNullOrEmpty(Pokemon.Nickname))
                {
                    <span style="font-size: 0.8em; color: var(--text-muted);">(@Pokemon.Name)</span>
                }
                @Pokemon.Gender
            </h3>
            @if (Pokemon.Types.Any())
            {
                <div class="pokemon-types">
                    @foreach (var type in Pokemon.Types)
                    {
                        <span class="type-badge type-@type.ToLower()">@type</span>
                    }
                </div>
                @if (!string.IsNullOrEmpty(Pokemon.TeraType))
                {
                    <div class="pokemon-tera-type" style="margin-top: 4px;">
                        <span class="type-badge type-@Pokemon.TeraType.ToLower()" style="font-size: 0.75rem; padding: 2px 8px; opacity: 0.9;">Tera @Pokemon.TeraType</span>
                    </div>
                }
            }
            @if (!string.IsNullOrEmpty(Pokemon.Item))
            {
                <div class="pokemon-item-container">
                    @if (!string.IsNullOrEmpty(Pokemon.ItemSpriteUrl))
                    {
                        <img src="@Pokemon.ItemSpriteUrl" alt="@Pokemon.Item" class="item-sprite" />
                    }
                    <p class="pokemon-item">@@ @Pokemon.Item</p>
                </div>
            }
        </div>
    </div>
    
    <div class="pokemon-details">
        @if (!string.IsNullOrEmpty(Pokemon.Ability))
        {
            <div class="detail-row pokemon-card-standard-border">
                <span class="detail-label">Ability:</span>
                <span class="detail-value">@Pokemon.Ability</span>
            </div>
        }

        @if (!string.IsNullOrEmpty(Pokemon.Level))
        {
            <div class="detail-row pokemon-card-standard-border">
                <span class="detail-label">Level:</span>
                <span class="detail-value">@Pokemon.Level</span>
            </div>
        }
        
        @if (!string.IsNullOrEmpty(Pokemon.EVs))
        {
            <div class="detail-row pokemon-card-standard-border">
                <span class="detail-label">EVs:</span>
                <span class="detail-value">@Pokemon.EVs</span>
            </div>
        }
        
        @if (!string.IsNullOrEmpty(Pokemon.IVs))
        {
            <div class="detail-row pokemon-card-standard-border">
                <span class="detail-label">IVs:</span>
                <span class="detail-value">@Pokemon.IVs</span>
            </div>
        }
        
        @if (!string.IsNullOrEmpty(Pokemon.Nature))
        {
            <div class="detail-row">
                <span class="detail-label">Nature:</span>
                <span class="detail-value nature">@Pokemon.Nature</span>
            </div>
        }
    </div>
    
    @if (Pokemon.Moves.Any())
    {
        <div class="pokemon-moves">
            <h4>Moves:</h4>
            <ul class="move-list">
                @foreach (var move in Pokemon.Moves)
                {
                    <li class="@(string.IsNullOrEmpty(move.Type) ? "" : $"type-border-{move.Type.ToLower()}") irregular-hexagon-border" style="--type-color: @GetTypeColor(move.Type)">
                        <span style="position: relative; z-index: 1;">@move.Name</span>
                    </li>
                }
            </ul>
        </div>
    }
</div>

@code {
    /// <summary>
    /// The Pokemon data to display in the card
    /// </summary>
    [Parameter]
    public PokemonData Pokemon { get; set; } = null!;

    private string GetTypeColor(string type)
    {
        if (string.IsNullOrEmpty(type)) return PokemonTypeColors.Default;

        return PokemonTypeColors.Map.TryGetValue(type, out var color)
            ? color
            : PokemonTypeColors.Default;
    }
}

<style>
/* Pokemon Card Styles */
.pokemon-card {
    background: var(--dark-surface);
    border: 2px solid var(--border-color);
    border-radius: 16px;
    padding: 1.5rem;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    height: 100%;
}

.pokemon-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--gen-5-border-color), var(--gen-5-secondary-border-color));
    opacity: 0;
    transition: var(--transition);
}

.pokemon-card:hover {
    transform: translateY(-5px);
    border-color: var(--gen-5-border-color);
    box-shadow: var(--shadow-xl);
}

.pokemon-card:hover::before {
    opacity: 1;
}

.pokemon-card-standard-border {
    border-bottom: 1px solid;
    border-image: linear-gradient(to right, var(--dark-surface), var(--separator-color)) 1;
}

.pokemon-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
}

.pokemon-sprite-container {
    width: 96px;
    height: 96px;
    background: linear-gradient(45deg,rgba(255, 255, 255, 1) 45%, var(--gen-5-border-color) 50%, rgba(41, 41, 41, 1) 55%);
    border: 2px solid var(--border-color);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: var(--transition);
}

.pokemon-card:hover .pokemon-sprite-container {
    border-color: var(--gen-5-border-color);
    transform: scale(1.05);
}

.pokemon-sprite {
    width: 80px;
    height: 80px;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

.sprite-placeholder {
    font-size: 3rem;
    color: var(--text-muted);
}

.pokemon-title {
    flex: 1;
}

.pokemon-title h3 {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.pokemon-types {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    flex-wrap: wrap;
}

.pokemon-item-container {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.item-sprite {
    width: 24px;
    height: 24px;
    image-rendering: pixelated;
    image-rendering: -moz-crisp-edges;
    image-rendering: crisp-edges;
}

.pokemon-item {
    color: var(--primary-light);
    font-weight: 600;
    font-size: 1rem;
    margin: 0;
}

.pokemon-details {
    margin-bottom: 1.5rem;
}

.detail-row {
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 0;
}

.detail-row:last-child {
    border-bottom: none;
}

.detail-label {
    color: var(--text-muted);
    font-weight: 500;
    font-size: 0.9rem;
}

.detail-value {
    color: var(--text-secondary);
    font-weight: 600;
    text-align: right;
}

.detail-value.nature {
    color: var(--success-color);
}

.pokemon-moves {
    background: var(--dark-bg);
    border-radius: 8px;
    padding: 1rem;
    margin-top: auto;
}

.pokemon-moves h4 {
    color: var(--text-primary);
    font-size: 1rem;
    margin-bottom: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.move-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.move-list li {
    padding: 0.5rem 0.75rem;
    margin-bottom: 0.5rem;
    text-align: center;
    background: #394242;
    border: 3px solid var(--primary-color);
    border-radius: 4px;
    color: var(--text-secondary);
    font-weight: 500;
    transition: var(--transition);
}

.move-list li:last-child {
    margin-bottom: 0;
}

.move-list li:hover {
    background: var(--dark-surface-light);
    border-left-color: var(--primary-light);
    transform: translateX(3px);
}

/* Type Badge Styles */
.type-badge {
    padding: 0.5rem 1rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: white;
    box-shadow: var(--shadow-md);
    transition: var(--transition);
}

.type-badge:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

:root {
  --border-width: 3px;
}

.irregular-hexagon-border {
  position: relative;
  background: transparent !important;
  border: none !important;
  z-index: 0;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 1. The Outer Shape (The Border Color) */
.irregular-hexagon-border::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: var(--type-color, #3B8686);
  z-index: -2;
  clip-path: polygon(
    15px 0%, 
    calc(100% - 15px) 0%, 
    100% 50%, 
    calc(100% - 15px) 100%, 
    15px 100%, 
    0% 50%
  );
}

/* 2. The Inner Shape (The Fill Color) */
.irregular-hexagon-border::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #394242;
  z-index: -1;
  clip-path: polygon(
    calc(15px + var(--border-width)) var(--border-width),
    calc(100% - 15px - var(--border-width)) var(--border-width),
    calc(100% - var(--border-width)) 50%,
    calc(100% - 15px - var(--border-width)) calc(100% - var(--border-width)),
    calc(15px + var(--border-width)) calc(100% - var(--border-width)),
    var(--border-width) 50%
  );
}
</style>
